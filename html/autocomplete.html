<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css">
    <title>Demo Autocomplete</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <style>
        .ui-autocomplete .highlight {
            text-decoration: underline;
            color: #A9A9A9;
        }
    </style>
</head>
<body>
<div class="ui-widget" style="padding: 10px;padding-left: 40px;">
    <label for="search">Product Name: </label>
    <input id="search" style="background-color: #3CBC8D;padding: 5px;width: 60%;">
</div>
<div style="padding: 10px;padding-left: 40px;">
    <input type="checkbox" name="useCache" id="useCache" value="true"> Use Cache
</div>
<div style="padding: 10px;padding-left: 40px;">
    Response Time: <label id="responsetime" style="color:red"></label> ms
</div>
<script>
    var responseTime;
    $(function() {
        function highlightText(text, $node) {
            var searchTextSource = $.trim(text).toLowerCase(), currentNode = $node.get(0).firstChild, matchIndex, newTextNode, newSpanNode;
            var originalNode = $node.get(0).firstChild;
            searchTexts = searchTextSource.split(" ");
            for(var i = 0; i < searchTexts.length ; i ++ ){
                searchText = searchTexts[i];
                while ((matchIndex = currentNode.data.toLowerCase().indexOf(searchText)) >= 0) {
                    newTextNode = currentNode.splitText(matchIndex);
                    currentNode = newTextNode.splitText(searchText.length);
                    newSpanNode = document.createElement("span");
                    newSpanNode.className = "highlight";
                    currentNode.parentNode.insertBefore(newSpanNode, currentNode);
                    newSpanNode.appendChild(newTextNode);
                }
                currentNode = originalNode;
                matchIndex = 0;
                newTextNode = "";
                newSpanNode = "";
            }
        }
        var getData = function (request, response) {
            var boolQueryType = $("input[type='radio'][name='boolquery']:checked");
            responseTime = new Date().getTime();
            $.getJSON(
                "http://35.243.73.103:8080/ec/autocomplete/en/" + request.term + "?useCache=" + $("#useCache").is(':checked'),
                function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.name
                        }
                    }));
                });
        };
        $("#search").autocomplete({
            source: getData
        }).data("ui-autocomplete")._renderItem = function(ul, item) {
            var $div = $("<div></div>").text(item.label);
            highlightText(this.term, $div);
            $("#responsetime").text(new Date().getTime() - responseTime);
            return $("<li></li>").append($div).appendTo(ul);
        };
    });
</script>
<div id="debug"></div>
</body>